# Система автоматизации поиска лучших цен

## Обзор

Реализована комплексная система автоматизации поиска лучших цен для тендеров. Система анализирует все предложения поставщиков, находит минимальные цены по каждой позиции и предоставляет детальную аналитику.

## Основные возможности

### 1. Автоматический анализ цен
- **Поиск лучших цен по позициям**: Система автоматически находит минимальную цену для каждой позиции тендера
- **Сравнительная таблица**: Отображение всех предложений с возможностью сравнения цен
- **Расчет экономии**: Автоматический расчет экономии от сметной стоимости
- **Анализ отклонений**: Вычисление отклонений цен от сметных значений

### 2. Детальная аналитика
- **Статистика по тендеру**: Общая экономия, количество предложений, активные поставщики
- **Анализ по позициям**: Детальный анализ каждой позиции с лучшими ценами
- **Рекомендации**: Автоматические рекомендации по выбору поставщиков
- **Выявление аномалий**: Поиск аномально высоких или низких цен

### 3. Интеграция с UI
- **Страница анализа цен**: Полнофункциональная страница с детальным анализом
- **Сводка в детальной странице**: Компактная сводка анализа на странице тендера
- **Кнопки быстрого доступа**: Удобный доступ к анализу из списка тендеров

## Архитектура

### Backend компоненты

#### 1. DTO классы
```java
// Основные DTO для анализа цен
PriceAnalysisDto - полный анализ тендера
PriceAnalysisItemDto - анализ по позиции
SupplierPriceDto - цена от поставщика
PriceSummaryDto - сводная статистика
```

#### 2. Сервисы
```java
PriceAnalysisService - интерфейс сервиса анализа
PriceAnalysisServiceImpl - реализация анализа цен
```

#### 3. Контроллеры
```java
PriceAnalysisController - REST API для анализа цен
TenderController - расширен методами анализа
```

### Frontend компоненты

#### 1. Страницы
```typescript
PriceAnalysisPage - полная страница анализа цен
```

#### 2. Компоненты
```typescript
PriceAnalysisSummary - сводка анализа для детальной страницы
```

## API Endpoints

### Анализ цен
- `GET /api/tenders/{id}/price-analysis` - полный анализ тендера
- `GET /api/tenders/{id}/best-prices` - лучшие цены по позициям
- `GET /api/tenders/{id}/comparison` - сравнительная таблица
- `GET /api/tenders/{id}/savings` - расчет экономии
- `GET /api/tenders/{id}/statistics` - статистика цен
- `GET /api/tenders/{id}/anomalous` - аномальные цены
- `GET /api/tenders/{id}/recommendations` - рекомендации

### Альтернативные endpoints
- `GET /api/price-analysis/tender/{tenderId}` - через отдельный контроллер

## Функциональность

### 1. Автоматический поиск лучших цен
```java
// Находит минимальную цену для каждой позиции
List<SupplierPriceDto> getBestPricesByItems(UUID tenderId)
```

### 2. Расчет экономии
```java
// Рассчитывает общую экономию от сметной стоимости
double calculateSavings(UUID tenderId)
```

### 3. Анализ отклонений
```java
// Вычисляет отклонения цен от сметных значений
double averagePriceDeviation = calculateAveragePriceDeviation(items)
```

### 4. Выявление аномалий
```java
// Находит цены, отклоняющиеся более чем на 2 стандартных отклонения
List<SupplierPriceDto> getAnomalousPrices(UUID tenderId)
```

### 5. Рекомендации
```java
// Генерирует рекомендации на основе анализа
List<String> getSupplierRecommendations(UUID tenderId)
```

## UI/UX особенности

### 1. Визуализация данных
- **Цветовая индикация**: Зеленый для экономии, красный для превышений
- **Иконки трендов**: Стрелки вверх/вниз для показа динамики цен
- **Чипы статусов**: Цветные индикаторы для лучших цен

### 2. Интерактивность
- **Фильтрация**: По статусу тендера, поставщикам
- **Сортировка**: По цене, поставщику, позиции
- **Детализация**: Возможность просмотра деталей по клику

### 3. Адаптивность
- **Мобильная версия**: Адаптивная верстка для мобильных устройств
- **Таблицы**: Горизонтальная прокрутка на малых экранах

## Примеры использования

### 1. Анализ тендера
```typescript
// Загрузка полного анализа
const analysis = await fnsApi.get(`/api/tenders/${tenderId}/price-analysis`);
console.log(`Экономия: ${analysis.summary.totalSavings} руб.`);
```

### 2. Получение лучших цен
```typescript
// Получение лучших цен по позициям
const bestPrices = await fnsApi.get(`/api/tenders/${tenderId}/best-prices`);
bestPrices.forEach(price => {
  console.log(`${price.supplierName}: ${price.unitPrice} руб.`);
});
```

### 3. Рекомендации
```typescript
// Получение рекомендаций
const recommendations = await fnsApi.get(`/api/tenders/${tenderId}/recommendations`);
recommendations.forEach(rec => console.log(rec));
```

## Преимущества системы

### 1. Автоматизация
- **Снижение ручного труда**: Автоматический поиск лучших цен
- **Исключение ошибок**: Алгоритмический анализ без человеческого фактора
- **Быстрота**: Мгновенный анализ больших объемов данных

### 2. Точность
- **Математические алгоритмы**: Статистический анализ отклонений
- **Проверка аномалий**: Выявление подозрительных цен
- **Валидация данных**: Проверка корректности введенных цен

### 3. Удобство
- **Интуитивный интерфейс**: Понятная визуализация данных
- **Быстрый доступ**: Кнопки анализа в нужных местах
- **Детализация**: Возможность углубленного изучения

## Планы развития

### 1. Расширенная аналитика
- **Исторический анализ**: Тренды цен по времени
- **Прогнозирование**: Предсказание будущих цен
- **Сравнение с рынком**: Анализ рыночных цен

### 2. Интеграции
- **Электронные торги**: Интеграция с внешними площадками
- **Банковские системы**: Автоматические платежи
- **1С**: Синхронизация с бухгалтерией

### 3. Автоматизация процессов
- **Автоматические тендеры**: Создание при превышении лимитов
- **Уведомления**: Автоматические алерты о лучших ценах
- **Отчеты**: Автоматическая генерация отчетов

## Техническая документация

### Требования к системе
- Java 23+
- Spring Boot 3.5.0+
- PostgreSQL
- React 18+
- Material-UI

### Установка и запуск
```bash
# Backend
./mvnw spring-boot:run

# Frontend
cd frontend
npm install
npm run dev
```

### Конфигурация
```yaml
# application.yml
spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/tender
  jpa:
    hibernate:
      ddl-auto: validate
```

## Заключение

Реализованная система автоматизации поиска лучших цен значительно повышает эффективность работы отдела закупки:

1. **Экономия времени**: Автоматический анализ вместо ручного сравнения
2. **Повышение точности**: Алгоритмический поиск лучших предложений
3. **Улучшение качества**: Выявление аномалий и рекомендации
4. **Прозрачность**: Детальная аналитика и отчетность

Система готова к использованию и может быть расширена дополнительной функциональностью по мере развития бизнес-процессов. 